<!-- omit in toc -->
# ユーザーストーリー

- [1. ユーザーとして、安全にアプリケーションにアクセスしたい。大切な家族の記録を守りたいから](#1-ユーザーとして安全にアプリケーションにアクセスしたい大切な家族の記録を守りたいから)
- [2. ユーザーとして、家族や友人をアプリに招待したい。家族や友人と記録を共有したいから](#2-ユーザーとして家族や友人をアプリに招待したい家族や友人と記録を共有したいから)
- [3. ユーザーとして、グループを管理したい。友人や家族と記録を共有したいから](#3-ユーザーとしてグループを管理したい友人や家族と記録を共有したいから)
- [4. ユーザーとして、作成したグループには必ず自分を所属させたい。自分が所属しないグループを管理することはないから](#4-ユーザーとして作成したグループには必ず自分を所属させたい自分が所属しないグループを管理することはないから)
- [5. ユーザーとして、メンバーを管理したい。グループに誰が入っているかを管理したいから](#5-ユーザーとしてメンバーを管理したいグループに誰が入っているかを管理したいから)
- [6. ユーザーとして、年表形式でグループの旅行、イベント、メンバー別のイベントを見たい。時系列でグループの記録を整理したいから](#6-ユーザーとして年表形式でグループの旅行イベントメンバー別のイベントを見たい時系列でグループの記録を整理したいから)
- [7. ユーザーとして、グループの旅行を管理したい。過去の振り返りや計画を立てたいから](#7-ユーザーとしてグループの旅行を管理したい過去の振り返りや計画を立てたいから)
- [8. ユーザーとして、旅行で訪問する場所を地図上で編集したい。場所を視覚的に把握したいから](#8-ユーザーとして旅行で訪問する場所を地図上で編集したい場所を視覚的に把握したいから)
- [9. ユーザーとして、旅行で訪問する場所間の移動経路を確認したい。旅行の計画を立てやすくしたいから](#9-ユーザーとして旅行で訪問する場所間の移動経路を確認したい旅行の計画を立てやすくしたいから)
- [10. ユーザーとして、旅行のタスクを管理したい。旅行計画とタスクを一元管理したいから](#10-ユーザーとして旅行のタスクを管理したい旅行計画とタスクを一元管理したいから)
- [11. ユーザーとして、同じ場所の過去の記録を見たい。お気に入りの場所は何度も訪れることがあるから](#11-ユーザーとして同じ場所の過去の記録を見たいお気に入りの場所は何度も訪れることがあるから)
- [12. ユーザーとして、地図表示から訪問場所を確認したい。訪れたことのある場所を俯瞰したいから](#12-ユーザーとして地図表示から訪問場所を確認したい訪れたことのある場所を俯瞰したいから)
- [13. ユーザーとして、過去の旅行を検索したい。年表から探し出すのは大変だから](#13-ユーザーとして過去の旅行を検索したい年表から探し出すのは大変だから)
- [14. ユーザーとして、グループのイベントを管理したい。過去の出来事の振り返りや未来の予定を管理したいから](#14-ユーザーとしてグループのイベントを管理したい過去の出来事の振り返りや未来の予定を管理したいから)
- [15. ユーザーとして、グループのメンバー別イベントを管理したい。特定のメンバーに関連する出来事を記録したいから](#15-ユーザーとしてグループのメンバー別イベントを管理したい特定のメンバーに関連する出来事を記録したいから)
- [16. ユーザーとして、DVCポイント契約とユースイヤーをグループ単位で管理したい。契約条件を正しく反映してポイントを運用したいから](#16-ユーザーとしてdvcポイント契約とユースイヤーをグループ単位で管理したい契約条件を正しく反映してポイントを運用したいから)
- [17. ユーザーとして、DVCポイントの利用可能数を月ごとに把握し、利用登録したい。失効を避けつつ最適にポイントを使いたいから](#17-ユーザーとしてdvcポイントの利用可能数を月ごとに把握し利用登録したい失効を避けつつ最適にポイントを使いたいから)
- [18. ユーザーとして、期間限定で付与されるDVCポイントを管理したい。キャンペーン等で付与されたポイントを正しく反映したいから](#18-ユーザーとして期間限定で付与されるdvcポイントを管理したいキャンペーン等で付与されたポイントを正しく反映したいから)

## 1. ユーザーとして、安全にアプリケーションにアクセスしたい。大切な家族の記録を守りたいから

```gherkin
Scenario: Google認証でログイン
  Given ユーザーはGoogleアカウントを持っている
  When ユーザーが有効なGoogleアカウントで認証を完了する
  Then ログインに成功する

Scenario: メールアドレスとパスワードでログイン
  Given ユーザーはログインしていない
  When ユーザーが有効なメールアドレスとパスワードでログインする
  Then ログインに成功する

Scenario: 無効な認証情報でログイン失敗
  Given ユーザーはログインしていない
  When ユーザーが無効なメールアドレスまたはパスワードでログインする
  Then ログインに失敗する

Scenario: 弱いパスワードは受け付けない
  Given ユーザーはアカウントを登録しようとしている
  When ユーザーが弱いパスワード（例: "password"）を入力する
  Then アカウント登録に失敗する

Scenario: ログアウト
  Given ユーザーはアプリにログインしている
  When ユーザーがログアウトを実行する
  Then ログイン状態が解除される
```

## 2. ユーザーとして、家族や友人をアプリに招待したい。家族や友人と記録を共有したいから

```gherkin
Scenario: 招待コードの生成
  Given メンバーが存在している
  When ユーザーがメンバーに対して招待コードの生成を実行する
  Then 招待コードが生成される

Scenario: アカウント登録時に招待コードを使用
  Given 有効な招待コードが生成されている
  When 招待を受けた人が招待コードを入力する
  Then 招待元のメンバーに自動的に紐づけられる

Scenario: 無効な招待コードでアクセス
  Given 招待コードの有効期限が切れている
  When 招待を受けた人が無効な招待コードを入力する
  Then メンバーに紐づけられない

Scenario: 無効な招待コードでアクセス
  Given 招待コードが存在しない
  When 招待を受けた人が無効な招待コードを入力する
  Then メンバーに紐づけられない
```

## 3. ユーザーとして、グループを管理したい。友人や家族と記録を共有したいから

```gherkin
Scenario: 有効なグループ名でグループ作成
  Given グループ「家族」が存在しない
  When ユーザーがグループ名「家族」でグループを作成する
  Then グループ名が「家族」でグループが作成される

Scenario: グループ名を変更する
  Given ユーザーが作成したグループ「家族」が存在している
  When ユーザーがグループ名を「家族・親戚」に変更する
  Then グループ名が「家族・親戚」に更新される

Scenario: グループの削除
  Given ユーザーが作成したグループ「家族」が存在している
  When ユーザーがグループ「家族」を削除する
  Then グループ「家族」が削除される
```

## 4. ユーザーとして、作成したグループには必ず自分を所属させたい。自分が所属しないグループを管理することはないから

```gherkin
Scenario: グループ作成時に自分を自動的に所属させる
  Given グループ「家族」が存在しない
  When ユーザーがグループ名「家族」でグループを作成する
  Then ユーザーがグループ「家族」に所属している
```

## 5. ユーザーとして、メンバーを管理したい。グループに誰が入っているかを管理したいから

```gherkin
Scenario: 有効なメンバー名でメンバー作成
  Given ユーザーの表示名「太郎」が存在しない
  When ユーザーが表示名「太郎」でメンバーを作成する
  Then メンバーの表示名が「太郎」でメンバーが作成される

Scenario: メンバーの表示名を変更する
  Given ユーザーが作成したメンバー「太郎」が存在している
  When ユーザーが表示名を「太郎くん」に変更する
  Then メンバーの表示名が「太郎くん」に更新される

Scenario: メンバーの削除
  Given ユーザーが作成したメンバー「太郎」が存在している
  When ユーザーがメンバー「太郎」の削除を実行し、確認に同意する
  Then メンバー「太郎」が削除される

Scenario: 作成したメンバーをグループに追加
  Given メンバー「太郎」が存在している
  And グループ「家族」が存在している
  When ユーザーがメンバー「太郎」をグループ「家族」に追加する
  Then メンバー「太郎」がグループ「家族」に追加される

Scenario: 1つのメンバーを複数のグループに追加
  Given メンバー「太郎」が存在している
  And グループ「家族」と「友人」が存在している
  When ユーザーがメンバー「太郎」をグループ「家族」に追加する
  And ユーザーがメンバー「太郎」をグループ「友人」に追加する
  Then メンバー「太郎」が両方のグループに所属する
```

## 6. ユーザーとして、年表形式でグループの旅行、イベント、メンバー別のイベントを見たい。時系列でグループの記録を整理したいから

```gherkin
Scenario: 選択したグループの年表表示
  Given グループ「家族」が登録されている
  And ユーザーはグループ「家族」に所属している
  When ユーザーがグループ「家族」の年表を表示する
  Then グループ「家族」の年表が表示される
  And 年表が時系列で表示される
  And 旅行、イベント、メンバー別イベントの行が表示される
  And 年単位で列分割されている

Scenario: 過去・現在・未来の年の表示
  Given 年表を表示している
  When ユーザーが年表を確認する
  Then 過去の年が表示される
  And 現在の年が表示される
  And 未来の年が表示される

Scenario: 年表上での旅行表示
  Given ユーザーの所属グループに旅行「沖縄旅行」が存在している
  When ユーザーが所属グループの年表を表示する
  Then 年表の旅行行に旅行「沖縄旅行」が表示される

Scenario: 旅行行の表示領域の調整
  Given ユーザーの所属グループの旅行が10件以上存在している
  When ユーザーが所属グループの年表を表示する
  And ユーザーが旅行行の表示領域を拡大する
  Then 表示しきれていなかった旅行が見えるようになる

Scenario: 旅行管理画面への遷移
  Given ユーザーが所属グループの年表を表示している
  When ユーザーが年表上の旅行を選択する
  Then 旅行管理画面に遷移する

Scenario: 年表上でのイベント表示
  Given ユーザーの所属グループにイベント「運動会」が存在している
  When ユーザーが所属グループの年表を表示する
  Then 年表のイベント行にイベント「運動会」が表示される

Scenario: イベント行の表示領域の調整
  Given ユーザーの所属グループのイベントが10件以上存在している
  When ユーザーが所属グループの年表を表示する
  And ユーザーがイベント行の表示領域を拡大する
  Then 表示しきれていなかったイベントが見えるようになる

Scenario: イベント管理画面への遷移
  Given ユーザーが所属グループの年表を表示している
  When ユーザーが年表上のイベントを選択する
  Then イベント管理画面に遷移する

Scenario: 年表上でのメンバー別イベント表示
  Given ユーザーの所属グループのメンバー「太郎」にイベント「誕生日」が存在している
  When ユーザーが所属グループの年表を表示する
  Then 年表のメンバー別イベント行にイベント「誕生日」が表示される

Scenario: メンバー別イベント行の表示領域の調整
  Given ユーザーの所属グループのメンバー別イベントが10件以上存在している
  When ユーザーが所属グループの年表を表示する
  And ユーザーがメンバー別イベント行の表示領域を拡大する
  Then 表示しきれていなかったイベントが見えるようになる

Scenario: メンバー別イベント管理画面への遷移
  Given ユーザーが所属グループの年表を表示している
  When ユーザーが年表上のメンバー別イベントを選択する
  Then メンバー別イベント管理画面に遷移する
```

## 7. ユーザーとして、グループの旅行を管理したい。過去の振り返りや計画を立てたいから

```gherkin
Scenario: 旅行の追加
  Given 旅行「沖縄旅行」が存在しない
  When ユーザーが旅行名「沖縄旅行」、開始日「2024-01-01」、終了日「2024-01-03」で旅行を作成する
  Then 旅行名が「沖縄旅行」、開始日が「2024-01-01」、終了日が「2024-01-03」の旅行が登録される

Scenario: 旅行の編集
  Given 旅行「沖縄旅行」が存在している
  And ユーザーは旅行「沖縄旅行」の編集画面を開いている
  When ユーザーが旅行名を「沖縄旅行2024」に変更する
  Then 旅行名が「沖縄旅行2024」に更新される

Scenario: 旅行の削除
  Given 旅行「沖縄旅行」が存在している
  When ユーザーが旅行「沖縄旅行」を削除する
  Then 旅行「沖縄旅行」が削除される
```

## 8. ユーザーとして、旅行で訪問する場所を地図上で編集したい。場所を視覚的に把握したいから

```gherkin
Scenario: 旅行の訪問場所編集の表示
  Given 旅行「沖縄旅行」が存在している
  When ユーザーが旅行「沖縄旅行」の訪問場所編集を開始する
  Then 地図画面が表示される

Scenario: 旅行に訪問場所を追加（検索）
  Given ユーザーは旅行「沖縄旅行」の地図画面を表示している
  When ユーザーが「首里城」を検索して選択する
  Then 地図上に「首里城」の位置がピンで表示される
  And 旅行「沖縄旅行」の訪問場所にピンが追加される

Scenario: 旅行に訪問場所を追加（手動）
  Given ユーザーは旅行「沖縄旅行」の地図画面を表示している
  When ユーザーが地図上の任意の位置を指定してピンを追加する
  Then 旅行「沖縄旅行」の訪問場所にピンが追加される

Scenario: 訪問場所の訪問日時の設定
  Given ユーザーは旅行「沖縄旅行」に訪問場所「首里城」が追加されている
  When ユーザーが訪問場所「首里城」の訪問日時を「2024-01-02」に設定する
  Then 訪問場所「首里城」の訪問日時が「2024-01-02」に更新される
```

## 9. ユーザーとして、旅行で訪問する場所間の移動経路を確認したい。旅行の計画を立てやすくしたいから

```gherkin
Scenario: 訪問場所間の経路検索の表示
  Given 旅行「沖縄旅行」が存在している
  And 訪問場所に「那覇空港」「首里城」「美ら海水族館」が追加されている
  When ユーザーが旅行「沖縄旅行」の経路検索を開始する
  Then 経路検索画面が表示される

Scenario: 経路検索
  Given ユーザーは旅行「沖縄旅行」の経路検索画面を開いている
  And 訪問場所に「那覇空港」「首里城」「美ら海水族館」が追加されている
  When ユーザーが訪問場所の順序を「那覇空港」「首里城」「美ら海水族館」に設定して経路検索を実行する
  Then 各訪問場所間の経路情報が表示される
  And 地図上に各訪問場所間の経路が線で表示される

Scenario: 経路検索結果の保存
  Given 旅行「沖縄旅行」の経路検索結果が表示されている
  When ユーザーが経路情報を保存する
  Then 経路情報が旅行「沖縄旅行」に保存される
```

## 10. ユーザーとして、旅行のタスクを管理したい。旅行計画とタスクを一元管理したいから

```gherkin
Scenario: 旅行のタスク管理画面の表示
  Given 旅行「沖縄旅行」が存在している
  When ユーザーが旅行「沖縄旅行」のタスク管理を開始する
  Then 旅行のタスク管理画面が表示される

Scenario: 旅行のタスクの追加
  Given ユーザーは旅行「沖縄旅行」のタスク管理画面を開いている
  When ユーザーがタスク「ホテル予約」を追加する
  Then 旅行にタスク「ホテル予約」が追加される

Scenario: 旅行のタスクの完了状態の変更
  Given 旅行「沖縄旅行」にタスク「ホテル予約」が存在する
  When ユーザーがタスク「ホテル予約」を完了にする
  Then タスク「ホテル予約」が完了状態になる

Scenario: 旅行のタスクの削除
  Given 旅行「沖縄旅行」にタスク「ホテル予約」が存在する
  When ユーザーがタスク「ホテル予約」を削除する
  Then タスク「ホテル予約」が旅行から削除される

Scenario: 旅行のタスクの編集
  Given 旅行「沖縄旅行」にタスク「ホテル予約」が存在する
  When ユーザーがタスク「ホテル予約」の期限を「2024-01-02」に変更し
  And 担当者をメンバー「太郎」に設定する
  Then タスク「ホテル予約」の期限が「2024-01-02」に更新される
  And タスク「ホテル予約」の担当者がメンバー「太郎」に更新される
```

## 11. ユーザーとして、同じ場所の過去の記録を見たい。お気に入りの場所は何度も訪れることがあるから

```gherkin
Scenario: 同じ場所の訪問記録の一覧表示
  Given 「首里城」がのユーザーが所属するグループの旅行の「沖縄旅行2023」「沖縄旅行2024」の訪問場所として登録されている
  When ユーザーが地図上で「首里城」を選択する
  Then 「首里城」を訪問した過去の旅行があることが表示される
  And 過去の旅行一覧に「沖縄旅行2023」「沖縄旅行2024」が表示される
  And 旅行を選択すると該当の旅行に遷移する
```

## 12. ユーザーとして、地図表示から訪問場所を確認したい。訪れたことのある場所を俯瞰したいから

```gherkin
Scenario: 地図表示で訪問場所の確認
  Given ユーザーが所属するグループの旅行に訪問場所「首里城」「美ら海水族館」が登録されている
  When ユーザーが地図表示を開く
  Then 地図上に訪問場所「首里城」「美ら海水族館」のピンが表示される

Scenario: 地図表示から旅行情報の確認
  Given 旅行「沖縄旅行2024」が存在している
  And 旅行「沖縄旅行2024」に訪問場所「首里城」が追加されている
  When ユーザーが地図上で「首里城」を選択し、訪問した旅行一覧から「沖縄旅行2024」を選択する
  Then 旅行詳細へ遷移するための導線が表示される
  And 旅行詳細を表示すると旅行管理画面へ遷移する
```

## 13. ユーザーとして、過去の旅行を検索したい。年表から探し出すのは大変だから

```gherkin
Scenario: 旅行名による検索
  Given 旅行「沖縄旅行」が存在している
  When ユーザーが旅行名で「沖縄」を検索する
  Then 「沖縄」を含む旅行が検索結果一覧に表示される

Scenario: 日付範囲でのフィルタリング
  Given 旅行開始日が「2024-05-01」、終了日が「2024-05-03」の旅行が存在している
  When ユーザーが「2024年1月1日」から「2024年12月31日」の範囲で絞り込む
  Then 2024年の旅行が検索結果一覧に表示される

Scenario: メンバー名でのフィルタリング
  Given メンバー「太郎」が所属するグループの旅行が存在している
  When ユーザーがメンバー名で「太郎」を検索する
  Then メンバー名「太郎」が所属するグループの旅行が検索結果一覧に表示される

Scenario: 検索結果が存在しない場合
  Given 旅行名に「沖縄」を含む旅行は存在しない
  When ユーザーが旅行名で「沖縄」を検索する
  Then 「該当する旅行は見つかりませんでした」というメッセージが表示される
```

## 14. ユーザーとして、グループのイベントを管理したい。過去の出来事の振り返りや未来の予定を管理したいから

```gherkin
Scenario: イベントの追加
  Given イベント「運動会」が存在しない
  When ユーザーがイベント名「運動会」、日付「2024-10-11」でイベントを作成する
  Then イベント名が「運動会」、日付が「2024-10-11」のイベントが登録される

Scenario: イベントの編集
  Given イベント「運動会」が存在している
  When ユーザーがイベント名を「太郎の運動会」に変更する
  Then イベント名が「太郎の運動会」に更新される

Scenario: イベントの削除
  Given イベント「運動会」が存在している
  When ユーザーがイベント「運動会」を削除する
  Then イベント「運動会」が削除される
```

## 15. ユーザーとして、グループのメンバー別イベントを管理したい。特定のメンバーに関連する出来事を記録したいから

```gherkin
Scenario: メンバー別イベントの追加
  Given メンバー「太郎」のイベント「結婚式」が存在しない
  When ユーザーがメンバー「太郎」のイベント名「結婚式」、日付「2024-06-15」でメンバー別イベントを作成する
  Then メンバー「太郎」のイベント名が「結婚式」、日付が「2024-06-15」のメンバー別イベントが登録される

Scenario: メンバー別イベントの編集
  Given メンバー「太郎」のイベント「結婚式」が存在している
  When ユーザーがメンバー「太郎」のイベント名を「太郎の結婚式」に変更する
  Then メンバー「太郎」のイベント名が「太郎の結婚式」に更新される

Scenario: メンバー別イベントの削除
  Given メンバー「太郎」のイベント「結婚式」が存在している
  When ユーザーがメンバー「太郎」のイベント「結婚式」を削除する
  Then メンバー「太郎」のイベント「結婚式」が削除される
```

## 16. ユーザーとして、DVCポイント契約とユースイヤーをグループ単位で管理したい。契約条件を正しく反映してポイントを運用したいから

```gherkin
Scenario: グループ単位でDVCポイント契約とユースイヤーを登録する
  Given ユーザーがグループ「家族」の管理権限を持っている
  And グループ「家族」にDVCポイント契約が登録されていない
  When ユーザーが契約名「契約A」、ユースイヤー「10月」、付与ポイント数を入力して登録する
  Then グループ「家族」に契約AのDVCポイント設定が保存される
  And 登録したユースイヤーを基準に有効期限計算ができる

Scenario: 別グループのDVCポイントは混在せず独立して管理される
  Given グループ「家族」とグループ「友人」にそれぞれDVCポイント契約が登録されている
  When ユーザーがグループ「家族」のDVCポイント設定を表示する
  Then 表示と管理の対象はグループ「家族」の契約のみになる
  And グループ「友人」の契約は表示にも編集対象にも含まれない
```

## 17. ユーザーとして、DVCポイントの利用可能数を月ごとに把握し、利用登録したい。失効を避けつつ最適にポイントを使いたいから

```gherkin
Scenario: DVCポイント利用計算画面を表示する
  Given ユーザーが所属するグループにDVCポイント契約が1件以上存在している
  When ユーザーがDVCポイント利用計算画面を開く
  Then 横軸に年月が表示されたタイムライン形式の表が表示される
  And UI上で選択中の年月が明確に判別できる

Scenario: 選択した月時点の利用可能ポイントを表示する
  Given 選択中グループの契約ごとのポイント付与履歴と利用登録履歴が存在している
  When ユーザーが年月「2025-10」を選択する
  Then 選択月時点で利用可能な合算ポイントが表示される
  And 利用可能ポイントは「有効期限内の各契約の合算ポイント - その時点までに利用登録済みポイント」で計算される

Scenario: ユースイヤーを基準に有効期限を判定する
  Given 契約Aのユースイヤーは10月である
  And 2025年10月に契約Aのポイントが付与される
  When システムが付与ポイントの有効期限を算出する
  Then 有効期限は「2024-10-01から2026-09-30」として扱われる
  ※ポイントは付与月の1年前から利用できるため、有効期限としては1年前〜1年後の期間となる

Scenario: 契約ごとに異なるユースイヤーを考慮して利用可能ポイントを計算する
  Given 契約Aのユースイヤーは10月である
  And 契約Bのユースイヤーは4月である
  And それぞれに付与ポイントが登録されている
  When ユーザーが同一の年月を選択する
  Then 契約ごとに異なる有効期限判定が適用される
  And 利用可能ポイントは各契約の有効ポイントを合算して表示される

Scenario: 表の先頭に有効期限範囲を示す色付き横線を表示する
  Given 画面上に複数契約のポイント有効期限が存在している
  When ユーザーがポイント表を確認する
  Then 縦軸の先頭に各ポイントの有効期限範囲を示す色付き横線が表示される
  And 色付き横線によりどの期間のポイントか視覚的に区別できる

Scenario: 利用登録済みポイントの明細を月ごとに表示する
  Given 2025年10月に2件のポイント利用登録が存在している
  When ユーザーが縦軸の2025年10月の利用ポイント表示を選択する
  Then 同一月の登録が縦並びで表示される
  And 各登録について登録時メモが表示される
  And 各登録について「どのポイントから何ポイント消化したか」の内訳が表示される

Scenario: 利用登録時は有効期限が早いポイントから自動消化する
  Given 同時点で利用可能なポイントが複数の有効期限で存在している
  When ユーザーがポイント利用を登録する
  Then システムは有効期限が早いポイントから順に消化して利用内訳を作成する

Scenario: 利用可能ポイント表示と同時に利用登録できる
  Given ユーザーがDVCポイント利用計算画面を開いている
  And 選択月時点で利用可能ポイントが存在している
  When ユーザーが利用ポイント数とメモを入力して利用登録を実行する
  Then 利用登録が保存される
  And 表示中の利用可能ポイントが再計算されて更新される
```

## 18. ユーザーとして、期間限定で付与されるDVCポイントを管理したい。キャンペーン等で付与されたポイントを正しく反映したいから

```gherkin
Scenario: 期間限定ポイントを期間とポイント数を指定して登録する
  Given ユーザーがDVCポイント利用計算画面を開いている
  And 選択中グループに通常ポイントの契約が登録されている
  When ユーザーが開始月「2025-07」、終了月「2025-12」、ポイント数「30」で期間限定ポイントを登録する
  Then 指定した期間とポイント数で期間限定ポイントが保存される
  And 通常ポイントとは別区分として管理される

Scenario: 期間限定ポイントの有効期間を示す横線を追加表示する
  Given 通常ポイントと期間限定ポイントが登録されている
  When ユーザーがポイント表を確認する
  Then 表の先頭に通常ポイントとは別で期間限定ポイントの横線が表示される
  And 横線により期間限定ポイントの有効期間が視覚的に判別できる

Scenario: 期間内は期間限定ポイントを利用可能ポイント計算に含める
  Given 期間限定ポイント「2025-07〜2025-12 30pt」が登録されている
  When ユーザーが年月「2025-10」を選択する
  Then 利用可能ポイント計算に期間限定ポイントが加算される

Scenario: 期間外は期間限定ポイントを利用可能ポイント計算に含めない
  Given 期間限定ポイント「2025-07〜2025-12 30pt」が登録されている
  When ユーザーが年月「2026-01」を選択する
  Then 利用可能ポイント計算に当該期間限定ポイントは含まれない

Scenario: ポイント消化順は有効期限順を維持する
  Given 利用可能な通常ポイントと期間限定ポイントが同時に存在している
  When ユーザーがポイント利用を登録する
  Then システムはポイント種別に関係なく有効期限が早い順で消化する
  And 期間限定ポイントを優先消化する仕様にはしない
```
