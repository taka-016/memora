<!-- omit in toc -->
# ユーザーストーリー

- [1. ユーザーとして、安全にアプリケーションにアクセスしたい。大切な家族の記録を守りたいから](#1-ユーザーとして安全にアプリケーションにアクセスしたい大切な家族の記録を守りたいから)
- [2. ユーザーとして、家族や友人をアプリに招待したい。家族や友人と記録を共有したいから](#2-ユーザーとして家族や友人をアプリに招待したい家族や友人と記録を共有したいから)
- [3. ユーザーとして、グループを管理したい。友人や家族と記録を共有したいから](#3-ユーザーとしてグループを管理したい友人や家族と記録を共有したいから)
- [4. ユーザーとして、作成したグループには必ず自分を所属させたい。自分が所属しないグループを管理することはないから](#4-ユーザーとして作成したグループには必ず自分を所属させたい自分が所属しないグループを管理することはないから)
- [5. ユーザーとして、メンバーを管理したい。グループに誰が入っているかを管理したいから](#5-ユーザーとしてメンバーを管理したいグループに誰が入っているかを管理したいから)
- [6. ユーザーとして、年表形式でグループの旅行、イベント、メンバー別のイベントを見たい。時系列でグループの記録を整理したいから](#6-ユーザーとして年表形式でグループの旅行イベントメンバー別のイベントを見たい時系列でグループの記録を整理したいから)
- [7. ユーザーとして、自分の管理外で自分が入っているグループの年表も見たい。別の人がグループを作ることもあるから](#7-ユーザーとして自分の管理外で自分が入っているグループの年表も見たい別の人がグループを作ることもあるから)
- [8. ユーザーとして、年表から旅行を管理したい。旅行は年別に分かれていると整理しやすいから](#8-ユーザーとして年表から旅行を管理したい旅行は年別に分かれていると整理しやすいから)
- [9. ユーザーとして、旅行で訪問する場所を地図上で編集したい。場所を視覚的に把握したいから](#9-ユーザーとして旅行で訪問する場所を地図上で編集したい場所を視覚的に把握したいから)
- [10. ユーザーとして、旅行で訪問する場所間の移動経路を確認したい。旅行の計画を立てやすくしたいから](#10-ユーザーとして旅行で訪問する場所間の移動経路を確認したい旅行の計画を立てやすくしたいから)
- [11. ユーザーとして、旅行のタスクを管理したい。旅行計画とタスクを一元管理したいから](#11-ユーザーとして旅行のタスクを管理したい旅行計画とタスクを一元管理したいから)
- [12. ユーザーとして、同じ場所の過去の記録を見たい。お気に入りの場所は何度も訪れることがあるから](#12-ユーザーとして同じ場所の過去の記録を見たいお気に入りの場所は何度も訪れることがあるから)
- [13. ユーザーとして、地図表示からも旅行情報を編集したい。場所から旅行を探すこともあるから](#13-ユーザーとして地図表示からも旅行情報を編集したい場所から旅行を探すこともあるから)
- [14. ユーザーとして、過去の旅行を検索したい。年表から探し出すのは大変だから](#14-ユーザーとして過去の旅行を検索したい年表から探し出すのは大変だから)
- [15. ユーザーとして、年表からイベントを管理したい。イベントは年別に分かれていると整理しやすいから](#15-ユーザーとして年表からイベントを管理したいイベントは年別に分かれていると整理しやすいから)

## 1. ユーザーとして、安全にアプリケーションにアクセスしたい。大切な家族の記録を守りたいから

```gherkin
Scenario: Google認証を開始する
  Given ユーザーはログイン画面を開いている
  When ユーザーがGoogle認証でのログインを選択する
  Then Googleの認証画面が表示される

Scenario: Google認証でログイン
  Given ユーザーはGoogleの認証画面を開いている
  When ユーザーが有効なGoogleアカウントで認証を完了する
  Then ユーザーはトップページに遷移する
  And ログイン状態が保持される

Scenario: メールアドレスとパスワードでログイン
  Given ユーザーはログイン画面を開いている
  When ユーザーが有効なメールアドレスとパスワードでログインする
  Then ユーザーはトップページに遷移する
  And ログイン状態が保持される

Scenario: 無効な認証情報でログイン失敗
  Given ユーザーはログイン画面を開いている
  When ユーザーが無効なメールアドレスまたはパスワードでログインする
  Then エラーメッセージ「認証情報が正しくありません」が表示される
  And ユーザーはログイン画面にとどまる

Scenario: 弱いパスワードは受け付けない
  Given ユーザーはアカウント登録画面を開いている
  When ユーザーが弱いパスワード（例: "password"）を入力する
  Then エラーメッセージ「パスワードは大文字、小文字、特殊文字、数字を含む8文字以上で入力してください」が表示される

Scenario: 強いパスワードは受け付ける
  Given ユーザーはアカウント登録画面を開いている
  And パスワード入力に関するエラーが表示されている
  When ユーザーが強いパスワード（例: "Password123!"）を入力する
  Then パスワード入力に関するエラーメッセージが表示されない

Scenario: ログアウト
  Given ユーザーはアプリにログインしている
  When ユーザーがログアウトを実行する
  Then ユーザーはログイン画面に遷移する
  And ログイン状態が解除される
```

## 2. ユーザーとして、家族や友人をアプリに招待したい。家族や友人と記録を共有したいから

```gherkin
Scenario: 招待コードの生成
  Given メンバーが存在している
  When ユーザーがメンバーに対して招待コードの生成を実行する
  Then 招待コードが生成される
  And 招待コードが表示される
  And 招待コードの有効期限が24時間後に設定される

Scenario: アカウント登録時に招待コードを使用
  Given 有効な招待コードが生成されている
  When 招待を受けた人が新規登録してログインし、招待コードを入力する
  Then 招待元のメンバーに自動的に紐づけられる

Scenario: 無効な招待コードでアクセス
  Given 招待コードの有効期限が切れている
  When 招待を受けた人が新規登録してログインし、無効な招待コードを入力する
  Then エラーメッセージ「招待コードが無効です」が表示される
```

## 3. ユーザーとして、グループを管理したい。友人や家族と記録を共有したいから

```gherkin
Scenario: 有効なグループ名でグループ作成
  Given グループ名「家族」が存在しない
  When ユーザーがグループ名「家族」でグループを作成する
  Then グループ名が「家族」でグループが作成される

Scenario: グループ名を変更する
  Given ユーザーが作成したグループ「家族」が存在している
  When ユーザーがグループ名を「家族・親戚」に変更して保存する
  Then グループ名が「家族・親戚」に更新される

Scenario: 自分が作成したグループの削除
  Given ユーザーが作成したグループ「家族」が存在している
  When ユーザーがグループ「家族」の削除を実行し、確認に同意する
  Then グループ「家族」が削除される
```

## 4. ユーザーとして、作成したグループには必ず自分を所属させたい。自分が所属しないグループを管理することはないから

```gherkin
Scenario: グループ作成時に自分を自動的に所属させる
  Given ユーザーはグループ作成画面を開いている
  When ユーザーがグループ名「家族」でグループを作成する
  Then グループが作成される
  And ユーザーは自動的にグループ「家族」に所属する
  And 所属グループ一覧に「家族」が表示される
```

## 5. ユーザーとして、メンバーを管理したい。グループに誰が入っているかを管理したいから

```gherkin
Scenario: 有効なメンバー名でメンバー作成
  Given ユーザーの表示名「太郎」が存在しない
  When ユーザーが表示名「太郎」でメンバーを作成する
  Then メンバーの表示名が「太郎」でメンバーが作成される

Scenario: メンバーの表示名を変更する
  Given ユーザーが作成したメンバー「太郎」が存在している
  When ユーザーが表示名を「太郎くん」に変更する
  Then メンバーの表示名が「太郎くん」に更新される

Scenario: 自分が作成したメンバーの削除
  Given ユーザーが作成したメンバー「太郎」が存在している
  When ユーザーがメンバー「太郎」の削除を実行し、確認に同意する
  Then メンバー「太郎」が削除される

Scenario: 作成したメンバーをグループに追加
  Given メンバー「太郎」が存在している
  And グループ「家族」が存在している
  When ユーザーがメンバー「太郎」をグループ「家族」に追加する
  Then メンバー「太郎」がグループ「家族」に追加される

Scenario: 1つのメンバーを複数のグループに追加
  Given メンバー「太郎」が存在している
  And グループ「家族」と「友人」が存在している
  When ユーザーがメンバー「太郎」をグループ「家族」に追加する
  And ユーザーがメンバー「太郎」をグループ「友人」に追加する
  Then メンバー「太郎」が両方のグループに所属する
```

## 6. ユーザーとして、年表形式でグループの旅行、イベント、メンバー別のイベントを見たい。時系列でグループの記録を整理したいから

```gherkin
Scenario: 選択したグループの年表表示
  Given グループ「家族」が登録されている
  When ユーザーがグループ「家族」の年表を表示する
  Then グループ「家族」の年表が表示される
  And 年表が時系列で表示される
  And 旅行、イベント、メンバー別イベントの行が表示される
  And 年単位で列分割されている

Scenario: 過去・現在・未来の年の表示
  Given 年表を表示している
  When ユーザーが年表を確認する
  Then 過去の年が表示される
  And 現在の年が表示される
  And 未来の年が表示される

Scenario: 年表上での旅行表示
  Given ユーザーの所属グループに旅行「沖縄旅行」が存在している
  When ユーザーが所属グループの年表を表示する
  Then 年表の旅行行に旅行「沖縄旅行」が表示される

Scenario: 旅行行の表示領域の調整
  Given ユーザーの所属グループの旅行が10件以上存在している
  When ユーザーが所属グループの年表を表示する
  And ユーザーが旅行行の表示領域を拡大する
  Then 表示しきれていなかった旅行が見えるようになる

Scenario: 年表上でのイベント表示
  Given ユーザーの所属グループにイベント「運動会」が存在している
  When ユーザーが所属グループの年表を表示する
  Then 年表のイベント行にイベント「運動会」が表示される

Scenario: イベント行の表示領域の調整
  Given ユーザーの所属グループのイベントが10件以上存在している
  When ユーザーが所属グループの年表を表示する
  And ユーザーがイベント行の表示領域を拡大する
  Then 表示しきれていなかったイベントが見えるようになる

Scenario: 年表上でのメンバー別イベント表示
  Given ユーザーの所属グループのメンバー「太郎」にイベント「誕生日」が存在している
  When ユーザーが所属グループの年表を表示する
  Then 年表のメンバー別イベント行にイベント「誕生日」が表示される

Scenario: メンバー別イベント行の表示領域の調整
  Given ユーザーの所属グループのメンバー別イベントが10件以上存在している
  When ユーザーが所属グループの年表を表示する
  And ユーザーがメンバー別イベント行の表示領域を拡大する
  Then 表示しきれていなかったイベントが見えるようになる
```

## 7. ユーザーとして、自分の管理外で自分が入っているグループの年表も見たい。別の人がグループを作ることもあるから

```gherkin
Scenario: 所属グループが一覧に表示される
  Given ユーザーはグループ「家族」と「友人」に所属している
  When ユーザーがグループ年表画面を開く
  Then グループ一覧に「家族」と「友人」が表示される

Scenario: 所属グループが存在しない場合
  Given ユーザーはどのグループにも所属していない
  When ユーザーがグループ年表画面を開く
  Then 「所属しているグループはありません」というメッセージが表示される
```

## 8. ユーザーとして、年表から旅行を管理したい。旅行は年別に分かれていると整理しやすいから

```gherkin
Scenario: 旅行管理画面の表示
  Given ユーザーは年表を表示している
  When ユーザーが特定の年の旅行一覧を表示する
  Then 旅行一覧が表示される

Scenario: 旅行の追加
  Given ユーザーは旅行一覧を表示している
  When ユーザーが旅行名「沖縄旅行」、開始日「2024-01-01」、終了日「2024-01-03」で旅行を作成する
  Then 旅行名が「沖縄旅行」、開始日が「2024-01-01」、終了日が「2024-01-03」の旅行が登録される

Scenario: 必須項目未入力で旅行追加失敗
  Given ユーザーは旅行追加画面を開いている
  When ユーザーが旅行名を空にして旅行を作成しようとする
  Then エラーメッセージ「旅行名は必須です」が表示される
  And 旅行は作成されない

Scenario: 開始日が終了日より後の場合の旅行追加失敗
  Given ユーザーは旅行追加画面を開いている
  When ユーザーが旅行名「沖縄旅行」、開始日「2024-01-03」、終了日「2024-01-01」で旅行を作成しようとする
  Then エラーメッセージ「開始日は終了日より前の日付を入力してください」が表示される
  And 旅行は作成されない

Scenario: 旅行の編集
  Given 旅行「沖縄旅行」が存在している
  And ユーザーは旅行「沖縄旅行」の編集画面を開いている
  When ユーザーが旅行名を「沖縄旅行2024」に変更して保存する
  Then 旅行名が「沖縄旅行2024」に更新される

Scenario: 自分が作成した旅行の削除
  Given 旅行「沖縄旅行」が存在している
  When ユーザーが旅行「沖縄旅行」の削除を実行し、確認に同意する
  Then 旅行「沖縄旅行」が削除される
```

## 9. ユーザーとして、旅行で訪問する場所を地図上で編集したい。場所を視覚的に把握したいから

```gherkin
Scenario: 旅行の訪問場所編集の表示
  Given 旅行「沖縄旅行」が存在している
  When ユーザーが旅行「沖縄旅行」の訪問場所編集を開始する
  Then 地図画面が表示される

Scenario: 旅行に訪問場所を追加（検索）
  Given ユーザーは旅行「沖縄旅行」の地図画面を表示している
  When ユーザーが「首里城」を検索して選択する
  Then 地図上に「首里城」の位置がピンで表示される
  And 旅行「沖縄旅行」の訪問場所にピンが追加される

Scenario: 旅行に訪問場所を追加（手動）
  Given ユーザーは旅行「沖縄旅行」の地図画面を表示している
  When ユーザーが地図上の任意の位置を指定してピンを追加する
  Then 旅行「沖縄旅行」の訪問場所にピンが追加される

Scenario: 訪問場所の訪問日時の設定
  Given ユーザーは旅行「沖縄旅行」に訪問場所「首里城」が追加されている
  When ユーザーが訪問場所「首里城」の訪問日時を「2024-01-02」に設定する
  Then 訪問場所「首里城」の訪問日時が「2024-01-02」に更新される
```

## 10. ユーザーとして、旅行で訪問する場所間の移動経路を確認したい。旅行の計画を立てやすくしたいから

```gherkin
Scenario: 訪問場所間の経路検索の表示
  Given 旅行「沖縄旅行」が存在している
  And 訪問場所に「那覇空港」「首里城」「美ら海水族館」が追加されている
  When ユーザーが旅行「沖縄旅行」の経路検索を開始する
  Then 経路検索画面が表示される

Scenario: 経路検索
  Given ユーザーは旅行「沖縄旅行」の経路検索画面を開いている
  And 訪問場所に「那覇空港」「首里城」「美ら海水族館」が追加されている
  When ユーザーが訪問場所の順序を「那覇空港」「首里城」「美ら海水族館」に設定して経路検索を実行する
  Then 各訪問場所間の経路情報が表示される
  And 地図上に各訪問場所間の経路が線で表示される

Scenario: 経路検索結果の保存
  Given 旅行「沖縄旅行」の経路検索結果が表示されている
  When ユーザーが経路情報を保存する
  Then 経路情報が旅行「沖縄旅行」に保存される
```

## 11. ユーザーとして、旅行のタスクを管理したい。旅行計画とタスクを一元管理したいから

```gherkin
Scenario: 旅行のタスク管理画面の表示
  Given 旅行「沖縄旅行」が存在している
  When ユーザーが旅行「沖縄旅行」のタスク管理を開始する
  Then 旅行のタスク管理画面が表示される

Scenario: 旅行のタスクの追加
  Given ユーザーは旅行「沖縄旅行」のタスク管理画面を開いている
  When ユーザーがタスク「ホテル予約」を追加する
  Then 旅行にタスク「ホテル予約」が追加される

Scenario: 旅行のタスクの完了状態の変更
  Given 旅行「沖縄旅行」にタスク「ホテル予約」が存在する
  When ユーザーがタスク「ホテル予約」を完了にする
  Then タスク「ホテル予約」が完了状態になる

Scenario: 旅行のタスクの削除
  Given 旅行「沖縄旅行」にタスク「ホテル予約」が存在する
  When ユーザーがタスク「ホテル予約」を削除する
  Then タスク「ホテル予約」が旅行から削除される

Scenario: 旅行のタスクの編集
  Given 旅行「沖縄旅行」にタスク「ホテル予約」が存在する
  When ユーザーがタスク「ホテル予約」の期限を「2024-01-02」に変更し
  And 担当者をメンバー「太郎」に設定する
  Then タスク「ホテル予約」の期限が「2024-01-02」に更新される
  And タスク「ホテル予約」の担当者がメンバー「太郎」に更新される
```

## 12. ユーザーとして、同じ場所の過去の記録を見たい。お気に入りの場所は何度も訪れることがあるから

```gherkin
Scenario: 同じ場所の訪問記録の一覧表示
  Given 「首里城」がのユーザーが所属するグループの旅行の「沖縄旅行2023」「沖縄旅行2024」の訪問場所として登録されている
  When ユーザーが地図上で「首里城」を選択する
  Then 「首里城」を訪問した過去の旅行があることが表示される
  And 過去の旅行一覧に「沖縄旅行2023」「沖縄旅行2024」が表示される
  And 旅行を選択すると該当の旅行に遷移する
```

## 13. ユーザーとして、地図表示からも旅行情報を編集したい。場所から旅行を探すこともあるから

```gherkin
Scenario: 地図表示から旅行情報の編集
  Given 旅行「沖縄旅行2024」が存在している
  And 旅行「沖縄旅行2024」に訪問場所「首里城」が追加されている
  When ユーザーが地図上で「首里城」を選択し、訪問した旅行一覧から「沖縄旅行2024」を選択する
  Then 旅行詳細へ遷移するための導線が表示される
  And 旅行詳細を表示すると旅行管理画面へ遷移する
```

## 14. ユーザーとして、過去の旅行を検索したい。年表から探し出すのは大変だから

```gherkin
Scenario: 旅行名による検索
  Given ユーザーは旅行検索画面を開いている
  And 旅行が登録されている
  When ユーザーが旅行名で「沖縄」を検索する
  Then 「沖縄」を含む旅行が検索結果一覧に表示される

Scenario: 日付範囲でのフィルタリング
  Given ユーザーは旅行検索画面を開いている
  And 旅行が登録されている
  When ユーザーが「2024年1月1日」から「2024年12月31日」の範囲で絞り込む
  Then 2024年の旅行が検索結果一覧に表示される

Scenario: メンバー名でのフィルタリング
  Given ユーザーは旅行検索画面を開いている
  And 旅行が登録されている
  When ユーザーがメンバー名で「太郎」を検索する
  Then メンバー名「太郎」が所属するグループの旅行が検索結果一覧に表示される

Scenario: 検索結果が存在しない場合
  Given ユーザーは旅行検索画面を開いている
  And 旅行が登録されている
  When ユーザーが存在しない旅行名で検索する
  Then 「該当する旅行は見つかりませんでした」というメッセージが表示される
```

## 15. ユーザーとして、年表からイベントを管理したい。イベントは年別に分かれていると整理しやすいから

```gherkin
Scenario: イベント管理画面の表示
  Given ユーザーは年表を表示している
  When ユーザーが特定の年のイベント一覧を表示する
  Then イベント一覧が表示される

Scenario: イベントの追加
  Given ユーザーはイベント一覧を表示している
  When ユーザーがイベント名「運動会」、日付「2024-10-11」でイベントを作成する
  Then イベント名が「運動会」、日付が「2024-10-11」のイベントが登録される

Scenario: 必須項目未入力でイベント追加失敗
  Given ユーザーはイベント追加画面を開いている
  When ユーザーがイベント名を空にしてイベントを作成しようとする
  Then エラーメッセージ「イベント名は必須です」が表示される
  And イベントは作成されない

Scenario: イベントの編集
  Given イベント「運動会」が存在している
  When ユーザーがイベント名を「太郎の運動会」に変更して保存する
  Then イベント名が「太郎の運動会」に更新される

Scenario: 自分が作成したイベントの削除
  Given イベント「運動会」が存在している
  When ユーザーがイベント「運動会」の削除を実行し、確認に同意する
  Then イベント「運動会」が削除される
```
