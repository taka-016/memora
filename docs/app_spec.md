# アプリケーション仕様書

## アプリケーション概要

- ユーザーが家族などのグループ内での過去と未来のイベントを記録・共有できるアプリケーション
- メイン機能は以下の情報を年表形式で俯瞰する画面
  - グループのイベント・旅行
  - メンバー別のイベント

## ユーザーストーリー

[user_stories](./user_stories.md)を参照

## ユースケース図

[usecase_diagram.md](./usecase_diagram.md)を参照

## データ構造

[er_diagram.md](./er_diagram.md)を参照

## 機能要件

### 認証・アカウント管理機能

- Google Cloud Identity Platform（Firebase Auth）を使用した認証システム
- Google認証とメールアドレス/パスワード認証の両方をサポート
- ユーザーアカウント（User）とアプリケーション内のメンバー（Member）の分離
- アカウント登録・ログイン・ログアウト機能
- アカウント管理機能（メールアドレス変更、パスワード変更、アカウント削除）
- パスワードポリシー：大文字、小文字、特殊文字、数字を含む8文字以上
- ログイン状態の維持
- セキュリティエラーハンドリング

### 招待機能

- メンバー単位の招待コード生成機能（有効期限24時間）
- 新規登録アカウント時の招待コード入力によるメンバーの紐づけ
- 招待コード有効期限管理（有効期限24時間）
- 無効招待コードのエラーハンドリング

### メンバー管理機能

- メンバーの作成・編集・削除機能
- メンバー一覧表示（表示名順）
- メンバーは複数のグループに所属することが可能
- メンバー作成者がオーナーとなる
- メンバーの管理権限はメンバーを作成したアカウント(オーナー)または管理者が持つ

### グループ管理機能

- グループの作成・編集・削除機能
- グループ一覧表示（グループ名順）
- グループへのメンバー追加・削除機能
- グループに追加可能なメンバーは自身が管理権限を持つメンバーのみ
- グループ作成者がオーナーとなる
- グループの管理権限はグループを作成したアカウント(オーナー)または管理者が持つ

### グループ年表表示機能

- グループ単位での年表表示
- 時系列による旅行・イベント・メンバー別のイベントの統合表示
- 過去・現在・未来の年の表示
- 年単位での列分割
- 旅行・イベント・メンバー別のイベントの行分割
- 行の高さ調整機能（ドラッグ操作）
- 所属グループの年表アクセス
- メンバー別のイベントにはメンバーの生年月日から計算して年齢・学年・厄年を表示(表示非表示を切り替え可能)

### イベント管理機能

- グループ年表のイベント行のセルから開かれる
- イベントの作成・編集・削除
- イベント管理画面からのイベント一覧表示
- イベント情報（名前、日付）の管理
- 日付順での並び替え

### 旅行管理機能

- グループ年表の旅行行のセルから開かれる
- 旅行の作成・編集・削除
- 旅行一覧表示（旅行開始日順）
- 旅行の訪問場所の追加・編集・削除
- 訪問場所の一覧表示（訪問開始日順）
- 訪問場所に基づく経路検索機能
- 訪問場所の順序を変更しての経路検索
- 経路検索画面上で訪問開始/終了日を変更可能
- 経路検索結果の保存
- 旅行のタスクの作成・編集・削除
- タスクの一覧表示（未完了・期日順）

### マップ機能

- 地図操作（ピンチ/ドラッグによる拡大・縮小・移動）
- 現在地への地図移動
- 地名検索による地図移動
- 地名検索によるピン追加
- マップ上の任意の位置へのピン追加
- ピンの編集・削除

### 旅行の検索・フィルタリング機能

- 旅行名による検索
- 日付範囲によるフィルタリング
- メンバー名によるフィルタリング

### メニュー構成

- ハンバーガーメニュー項目：
  - グループ年表
  - 地図表示
  - グループ管理
  - メンバー管理
  - 設定
  - アカウント設定
  - ログアウト
