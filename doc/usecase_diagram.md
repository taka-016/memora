# ユースケース図

## ユースケース抽出 — 機能ブロックごとに整理

### 1. 認証・セキュリティ

| UC ID | ユースケース | 主アクター | ゴール/完了条件 |
|-------|-------------|------------|----------------|
| A-1 | ログイン | ユーザー | Google OAuth または メール＋パスワードで認証し、セッション確立 |
| A-2 | ログアウト | ユーザー | 現行セッションを終了し、ログイン画面へ戻る |
| A-3 | パスワードポリシー確認 | ユーザー | 新規登録・変更時に規定文字種／長さを満たすことを確認 |
| A-4 | 招待 URL 生成 | 既存ユーザー | 招待リンクを発行し、24 h 有効期限を設定 |
| A-5 | 招待 URL 経由アカウント登録 | 招待されたユーザー | 招待先グループに紐づく形でアカウント作成 |

### 2. 基本データ管理

#### グループ管理

| UC ID | ユースケース | 主アクター | ゴール |
|-------|-------------|------------|-------|
| G-1 | グループ作成 | ユーザー | 新しいグループを登録 |
| G-2 | グループ編集 | 作成者 | 名称などを更新 |
| G-3 | グループ削除 | 作成者 | グループと関連イベント/旅行を削除 |
| G-4 | 所属グループ一覧表示 | ユーザー | 自分が属するグループを確認 |

#### メンバー管理

| UC ID | ユースケース | 主アクター | ゴール |
|-------|-------------|------------|-------|
| M-1 | メンバー作成 | ユーザー | 新しいメンバーを登録 |
| M-2 | メンバー編集 | 作成者 | メンバー名を更新 |
| M-3 | メンバー削除 | 作成者 | メンバーと関連イベント/旅行を削除 |
| M-4 | メンバーをグループに追加 | ユーザー | 既存メンバーを 1 つ以上のグループへ紐づけ |

### 3. イベント管理

| UC ID | ユースケース | 主アクター | ゴール |
|-------|-------------|------------|-------|
| E-1 | イベント登録 | ユーザー | 個人／グループのイベントを年表に追加 |
| E-2 | イベント編集 | 作成者 | イベント情報を更新 |
| E-3 | イベント削除 | 作成者 | イベントを年表から除去 |

### 4. 旅行管理

| UC ID | ユースケース | 主アクター | ゴール |
|-------|-------------|------------|-------|
| T-1 | 旅行登録 | ユーザー | 旅行（期間・参加者・メモ）を年表に追加 |
| T-2 | 旅行編集 | 作成者 | 旅行情報を更新 |
| T-3 | 旅行削除 | 作成者 | 旅行を年表から除去 |
| T-4 | 旅行に位置情報追加 | ユーザー | 旅行に訪問場所を紐づけ、期間・メモを保存 |
| T-5 | 同一場所の過去記録参照 | ユーザー | 特定の場所に紐づく旅行履歴を一覧表示 |

### 5. 表示・UI／検索

| UC ID | ユースケース | 主アクター | ゴール |
|-------|-------------|------------|-------|
| V-1 | 年表表示 | ユーザー | 選択グループまたはトップページのイベント・旅行を時系列で表示 |
| V-2 | 旅行先を地図表示 | ユーザー | 旅行に登録された位置情報をピンで可視化 |
| V-3 | 地図操作 | ユーザー | ピンチ／ドラッグによる拡大縮小・移動 |
| V-4 | ハンバーガーメニュー操作 | ユーザー | 各機能画面への遷移 |
| V-5 | 検索・フィルタリング | ユーザー | キーワード・日付範囲・参加者で絞り込み |

## ユースケース図

```mermaid
graph LR
    %% アクター定義
    User([ユーザー])
    Creator([作成者])
    InvitedUser([招待されたユーザー])
    ExistingUser([既存ユーザー])
    
    %% システム境界
    subgraph "memora"
        %% 認証・セキュリティ系
        A1([A-1: ログイン])
        A2([A-2: ログアウト])
        A3([A-3: パスワードポリシー確認])
        A4([A-4: 招待URL生成])
        A5([A-5: 招待URL経由アカウント登録])
        
        %% 基本データ管理系 - グループ管理
        G1([G-1: グループ作成])
        G2([G-2: グループ編集])
        G3([G-3: グループ削除])
        G4([G-4: 所属グループ一覧表示])
        
        %% 基本データ管理系 - メンバー管理
        M1([M-1: メンバー作成])
        M2([M-2: メンバー編集])
        M3([M-3: メンバー削除])
        M4([M-4: メンバーをグループに追加])
        
        %% イベント管理系
        E1([E-1: イベント登録])
        E2([E-2: イベント編集])
        E3([E-3: イベント削除])
        
        %% 旅行管理系
        T1([T-1: 旅行登録])
        T2([T-2: 旅行編集])
        T3([T-3: 旅行削除])
        T4([T-4: 旅行に位置情報追加])
        T5([T-5: 同一場所の過去記録参照])
        
        %% 表示・UI系
        V1([V-1: 年表表示])
        V2([V-2: 旅行先を地図表示])
        V3([V-3: 地図操作])
        V4([V-4: ハンバーガーメニュー操作])
        V5([V-5: 検索・フィルタリング])
    end
    
    %% アクターとユースケースの関係
    User --> A1
    User --> A2
    User --> A3
    User --> G1
    User --> G4
    User --> M1
    User --> M4
    User --> E1
    User --> T1
    User --> T4
    User --> T5
    User --> V1
    User --> V2
    User --> V3
    User --> V4
    User --> V5
    
    Creator --> G2
    Creator --> G3
    Creator --> M2
    Creator --> M3
    Creator --> E2
    Creator --> E3
    Creator --> T2
    Creator --> T3
    
    ExistingUser --> A4
    InvitedUser --> A5
```
